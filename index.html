<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>ç ¸å·æ™®</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: sans-serif;
    }
    canvas {
      display: block;
      background: #eef;
    }
  </style>
</head>
<body>
  <canvas id="myCanvas" width="800" height="600"></canvas>

  <script>
    const canvas = document.getElementById("myCanvas");
    const ctx = canvas.getContext("2d");

    // è¼‰å…¥åœ–ç‰‡
    const birdImg = new Image(); birdImg.src = "images/brid.png";
    const trumpUpImg = new Image(); trumpUpImg.src = "images/trumpup.png";
    const trumpDownImg = new Image(); trumpDownImg.src = "images/trumpdown.png";
    const trumpPoopImg = new Image(); trumpPoopImg.src = "images/trumppoop.png";

    // å°é³¥
    const bird = { x: 100, y: 50, width: 50, height: 50 };

    // å·æ™®
    const trump = { x: 300, y: 400, width: 100, height: 100, poopImg: trumpPoopImg };

    let score = 0;
    let timer = 15; // ç§’
    let poopY = bird.y + bird.height;
    let isPooping = false;

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(birdImg, bird.x, bird.y, bird.width, bird.height);

      if (isPooping) {
        ctx.drawImage(trump.poopImg, trump.x + trump.width / 2 - 15, poopY, 30, 30);
      }

      ctx.drawImage(trumpDownImg, trump.x, trump.y, trump.width, trump.height);

      ctx.fillStyle = "black";
      ctx.font = "20px Arial";
      ctx.fillText("å¾—åˆ†ï¼š" + score, 20, 30);
      ctx.fillText("å‰©é¤˜æ™‚é–“ï¼š" + timer + " ç§’", 20, 60);
    }

    function gameLoop() {
      if (timer <= 0) return endGame();
      if (isPooping) poopY += 5;
      draw();
      requestAnimationFrame(gameLoop);
    }

    function poop() {
      if (isPooping) return;
      isPooping = true;
      poopY = bird.y + bird.height;

      // ç°¡å–®ç¢°æ’åµæ¸¬
      const interval = setInterval(() => {
        if (
          poopY > trump.y &&
          poopY < trump.y + trump.height &&
          bird.x + bird.width / 2 > trump.x &&
          bird.x + bird.width / 2 < trump.x + trump.width
        ) {
          score++;
          isPooping = false;
          clearInterval(interval);
        }

        if (poopY > canvas.height) {
          isPooping = false;
          clearInterval(interval);
        }
      }, 30);
    }

    function endGame() {
      alert("éŠæˆ²çµæŸï¼ä½ ç¸½å…±ç ¸ä¸­ " + score + " æ¬¡å·æ™® ğŸ’©");
    }

    // æ§åˆ¶
    document.addEventListener("keydown", (e) => {
      if (e.code === "Space") {
        poop();
      }
    });

    // å€’æ•¸è¨ˆæ™‚å™¨
    setInterval(() => {
      if (timer > 0) timer--;
    }, 1000);

    // é–‹å§‹
    window.onload = () => {
      gameLoop();
    };
  </script>
</body>
</html>

